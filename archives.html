<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="bootstrap-3.3.7/docs/favicon.ico">

    <title>Archives</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap-3.3.7/dist/css/bootstrap.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="bootstrap-3.3.7/docs/assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/jumbotron.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="bootstrap-3.3.7/docs/assets/js/ie-emulation-modes-warning.js"></script>

    <link href="css/main.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
      
    <!--Grid Load Gallery links-->
    <link rel="stylesheet" type="text/css" href="css/photogrid/normalize.css" />
		<link rel="stylesheet" type="text/css" href="css/photogrid/demo.css" />
		<link rel="stylesheet" type="text/css" href="css/photogrid/pater.css" />
		<script>document.documentElement.className = 'js';</script>
      
    
    
    
        
  </head>

  <body>

    <nav class="navbar navbar-fixed-top navbar-inverse">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Insert Logo Here</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="feed.html">Home</a></li>
            <li><a href="profile.html">Profile</a></li>
            <li class="active"><a href="#contact">Archives</a></li>
          </ul>
        </div><!-- /.nav-collapse -->
      </div><!-- /.container -->
    </nav><!-- /.navbar -->

<!--Album List Start-->
      <div class="container">
        <!--Unite Gallery-->
        <div class="archives-container">
          <div class = "album-gallery">
              <div id = "ag-container">
                  <div id="archives-small-container" class="grid grid--type-c">
                    <div class="grid__sizer"></div>
            
            </div>
            </div>  
          </div>
        </div>
          
        <div class="more-photos">
          Load more photos
        </div>

        <hr id="footer-border">

      <footer class="footer">
        <p>&copy; Blaise Cruz, Giselle Nodalo, Julianne Tan</p>
      </footer>

    

 <!-- Script for image layout --> 
        <script src="js/imagesloaded.pkgd.min.js"></script>
		<script src="js/masonry.pkgd.min.js"></script>
		<script src="js/anime.min.js"></script>
		<script src="js/main.js"></script>
      </div> <!-- /container -->
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="bootstrap-3.3.7/docs/assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="bootstrap-3.3.7/docs/dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="bootstrap-3.3.7/docs/assets/js/ie10-viewport-bug-workaround.js"></script>

      <script>
            // Globals
            var root = 'https://jsonplaceholder.typicode.com';
            var current_set = 0;
            var photos_list = new Array();
            var albums_list = new Array();
            var user_list = new Array();
            var album_data;
            var user_data;
            
            // JQuery
            $(document).ready(function() {
                // Variables
                var $loadMoreBtn = $('.more-photos');
                
                function loadAllPhotos() {
                    console.log('Loading photos...');
                    $.getJSON(root + '/photos/', function(data) {
                        var i;
                        for (i = 0; i < data.length; i++)
                            photos_list.push(data[i]);
                    });
                    console.log('Done!');
                }
                
                function loadAllUsers() {
                    console.log('Loading all users...');
                    $.getJSON(root + '/users/', function(data) {
                        var i;
                        for (i = 0; i < data.length; i++)
                            user_list.push(data[i]);
                    });
                    console.log('Done!');
                }
                
                function loadAllAlbums() {
                    console.log('Loading all albums...');
                    $.getJSON(root + '/albums/', function(data) {
                        var i;
                        for (i = 0; i < data.length; i++)
                            albums_list.push(data[i]);
                    });
                    console.log('Done!');
                }
                
                function printPhoto(photo) {
                    //$photos.append('<a href="#" class="photo" id="' + photo.id + '"><img src="' + photo.thumbnailUrl + '"></a>');

                    /*<div class="grid__item">
                      <a class="grid__link lb-caption" href="#"><img class="grid__img" src="photos/set3/1.jpg" alt="Some image" /></a>
                    </div>  */

                    var gridItem = document.createElement("div");
                    var gridLink = document.createElement("a");
                    var img = $('<img>');

                    gridLink.setAttribute('id', photo.id);
                    gridLink.setAttribute('href', "photo_view.html?photoId=" + photo.id);
                    img.attr('src', photo.thumbnailUrl);
                    img.attr('class', "grid__img")

                    $(gridItem).addClass("grid__item");
                    $(gridLink).addClass("grid__link");

                    $(gridLink).append(img);
                    $(gridItem).append(gridLink);

                    $('#archives-small-container').append(gridItem);
                }
                
                function printSequence() {
                    var i;
                    if (current_set + 10 < 5000) {
                        for (i = current_set; i < current_set + 10; i++) {
                            printPhoto(photos_list[i]);
                        }
                    }   
                    current_set += 10;
                    var container = document.querySelector('#archives-small-container');
                    var masonry = new Masonry(container, {
                        columnWidth: '.grid__item',
                        itemSelector: '.grid__item'
                    });
                }
                
                function matchPhotoToId(ids) {
                    var i;
                    for (i = 0; i < photos_list.length; i++) {
                        if (photos_list[i].id === ids) {
                            //console.log('Found!')
                            return photos_list[i];
                        }
                    }
                    return 0;
                }
                
                function matchPhotoToDetails(photo) {
                    var i;
                    for (i = 0; i < albums_list.length; i++)
                        if (photo.albumId == albums_list[i].id)
                            album_data = albums_list[i];
                    console.log(album_data);
                    for (i = 0; i < user_list.length; i++)
                        if (album_data.userId == user_list[i].id)
                            user_data = user_list[i];
                    console.log(user_data);
                }
                
                function printPhotoDetails(photo) {
                    console.log(photo);
                    $photodetails.empty();

                    $photodetails.append(
                        '<img src="' + photo.url + '">' +
                        '<p>' +
                        'Title: ' + photo.title + '<br />' + 
                        'Album: <a href="' + 'album.html?albumId=' + album_data.id + '">' + album_data.title + '</a><br />' +
                        'By: <a href="' + 'user.html?id=' + user_data.id + '">' + user_data.name + '</a><br />' + 
                        '</p>'
                    );
                }
                
                function printAllWithTimeout() {
                    setTimeout(function() {
                        printSequence();
                    }, 1000);
                }
                
                // Handlers
                $loadMoreBtn.on('click', function() {
                    printSequence();
                    console.log(current_set);
                });
                
                $(document).on('click', 'a', function() {
                    var sid = parseInt(this.id);
                    var curphoto = matchPhotoToId(sid);
                    matchPhotoToDetails(curphoto);
                    printPhotoDetails(curphoto);
                });
                
                // Main
                loadAllPhotos();
                loadAllAlbums();
                loadAllUsers();
                printAllWithTimeout();
            });
        </script>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    
  </body>
</html>
